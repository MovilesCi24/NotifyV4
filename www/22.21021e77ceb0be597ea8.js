(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{qzrR:function(n,l,e){"use strict";e.r(l);var o=e("CcnG"),t=e("dVwY"),i=e("fhD/"),u=e("ZZ/e"),r=e("ixqX"),s=e("YdJ5"),a=function(){function n(n,l,e,o,t,i){this.global=n,this.Post=l,this.navCtrl=e,this.Loading=o,this.Alert=t,this.Aroute=i,this.Dispositivo=new Array,this.Componentes=new Array,this.Eventos=new Array,this.TDisp=new Array,this.Tcomp=new Array,this.Vevent=new Array,this.Enviado=new Array;var u=this.Aroute.snapshot.paramMap.get("Id");this.Data=u.split("."),console.log(this.Data),this.Id_Perfil=this.Data[0],console.log(this.Id_Perfil)}return n.prototype.ngOnInit=function(){var n=this;this.Post.Event({Option:"GetDevices"},function(l,e){console.log(e),null==l?(n.Devices=JSON.parse(e.data),n.OrganizarData(n.Devices)):n.Alert.AlertOnebutton("Error",JSON.stringify(l.message))})},n.prototype.OrganizarData=function(n){for(var l=new Map,e=0,o=n;e<o.length;e++)l.has((h=o[e]).Id_DeviceType)||(l.set(h.Id_DeviceType,!0),this.Dispositivo.push({Id_DeviceType:h.Id_DeviceType,NameDevices:h.NameDevices}),this.TDisp.push(!0));this.Componentes=new Array(this.Dispositivo.length),this.Tcomp=new Array(this.Dispositivo.length);for(var t=0;t<this.Dispositivo.length;t++){this.Componentes[t]=new Array,this.Tcomp[t]=new Array;for(var i=new Map,u=0,r=n;u<r.length;u++)i.has((h=r[u]).Id_Component)||h.Id_DeviceType!=this.Dispositivo[t].Id_DeviceType||(i.set(h.Id_Component,!0),this.Componentes[t].push({Id_Component:h.Id_Component,NameComponent:h.NameComponent}),this.Tcomp[t].push(!1))}for(this.Eventos=new Array(this.Dispositivo.length),this.Vevent=new Array(this.Dispositivo.length),t=0;t<this.Dispositivo.length;t++){this.Eventos[t]=new Array(this.Componentes[t].length),this.Vevent[t]=new Array(this.Componentes[t].length);for(var s=0;s<this.Componentes[t].length;s++){this.Eventos[t][s]=new Array,this.Vevent[t][s]=new Array;for(var a=new Map,c=0,p=n;c<p.length;c++){var h;a.has((h=p[c]).Id_EventComponent)||h.Id_DeviceType!=this.Dispositivo[t].Id_DeviceType||h.Id_Component!=this.Componentes[t][s].Id_Component||(a.set(h.Id_EventComponent,!0),this.Eventos[t][s].push({Id_DeviceType:h.Id_DeviceType,NameDevices:h.NameDevices,Id_Component:h.Id_Component,NameComponent:h.NameComponent,Id_EventComponent:h.Id_EventComponent,NameEvent:h.NameEvent,Id_DeviceComponent:h.Id_DeviceComponent}),this.Vevent[t][s].push(!1))}}}console.log(this.Eventos)},n.prototype.ToggleD=function(n){0==this.TDisp[n]?this.TDisp[n]=!0:1==this.TDisp[n]&&(this.TDisp[n]=!1)},n.prototype.ToggleC=function(n,l){0==this.Tcomp[n][l]?this.Tcomp[n][l]=!0:1==this.Tcomp[n][l]&&(this.Tcomp[n][l]=!1)},n.prototype.Asociar=function(){var n=this;this.Loading.LoadingNormal("Asociando Eventos..."),console.log(this.Vevent);for(var l=0,e=0;e<this.Dispositivo.length;e++)for(var o=0;o<this.Componentes[e].length;o++)for(var t=0;t<this.Eventos[e][o].length;t++)1==this.Vevent[e][o][t]&&(l+=1,this.Enviado.push(!1));if(0==l)this.Loading.HideLoading(),this.Loading.LoadingNormal("Seleccione al menos un evento",2);else{var i=0;for(e=0;e<this.Dispositivo.length;e++)for(o=0;o<this.Componentes[e].length;o++)for(t=0;t<this.Eventos[e][o].length;t++)1==this.Vevent[e][o][t]&&(this.Post.Event({Option:"AsociateEvent",Id_ProfileEvent:this.Id_Perfil,Id_DeviceComponent:this.Eventos[e][o][t].Id_DeviceComponent,Id_DeviceType:this.Eventos[e][o][t].Id_DeviceType,Id_EventComponent:this.Eventos[e][o][t].Id_EventComponent},function(l,e){console.log(e),null==l?n.Enviado[i]=!0:n.Alert.AlertOnebutton("Error",JSON.stringify(l.message))}),i+=1);setTimeout(function(){n.Loading.HideLoading(),n.navCtrl.navigateRoot("/perfiles")},2e3)}},n}(),c=function(){return function(){}}(),p=e("pMnS"),h=e("oBZk"),b=e("gIcY"),d=e("Ip0R"),v=e("ZYCi"),m=o.mb({encapsulation:0,styles:[[".item[_ngcontent-%COMP%]   .sc-ion-label-md-h[_ngcontent-%COMP%], .item.sc-ion-label-md-h[_ngcontent-%COMP%]{width:100%}"]],data:{}});function g(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,1,"ion-icon",[["name","arrow-dropdown"],["slot","end"]],null,null,null,h.P,h.j)),o.nb(1,49152,null,0,u.B,[o.h,o.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"arrow-dropdown")},null)}function f(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,1,"ion-icon",[["name","remove"],["slot","end"]],null,null,null,h.P,h.j)),o.nb(1,49152,null,0,u.B,[o.h,o.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"remove")},null)}function C(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,1,"ion-icon",[["name","arrow-dropdown"],["slot","end"]],null,null,null,h.P,h.j)),o.nb(1,49152,null,0,u.B,[o.h,o.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"arrow-dropdown")},null)}function x(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,1,"ion-icon",[["name","remove"],["slot","end"]],null,null,null,h.P,h.j)),o.nb(1,49152,null,0,u.B,[o.h,o.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"remove")},null)}function D(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,9,"ion-item",[],null,null,null,h.X,h.m)),o.nb(1,49152,null,0,u.G,[o.h,o.k],null,null),(n()(),o.Bb(2,0,[" "," "])),(n()(),o.ob(3,0,null,0,6,"ion-toggle",[["color","danger"],["slot","end"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var t=!0,i=n.component;return"ionBlur"===l&&(t=!1!==o.xb(n,4)._handleBlurEvent()&&t),"ionChange"===l&&(t=!1!==o.xb(n,4)._handleIonChange(e.target.checked)&&t),"ngModelChange"===l&&(t=!1!==(i.Vevent[n.parent.parent.parent.parent.context.index][n.parent.parent.context.index][n.context.index]=e)&&t),t},h.kb,h.E)),o.nb(4,16384,null,0,u.c,[o.k],null,null),o.yb(1024,null,b.b,function(n){return[n]},[u.c]),o.nb(6,671744,null,0,b.e,[[8,null],[8,null],[8,null],[6,b.b]],{model:[0,"model"]},{update:"ngModelChange"}),o.yb(2048,null,b.c,null,[b.e]),o.nb(8,16384,null,0,b.d,[[4,b.c]],null,null),o.nb(9,49152,null,0,u.zb,[o.h,o.k],{color:[0,"color"]},null)],function(n,l){n(l,6,0,l.component.Vevent[l.parent.parent.parent.parent.context.index][l.parent.parent.context.index][l.context.index]),n(l,9,0,"danger")},function(n,l){n(l,2,0,l.context.$implicit.NameEvent),n(l,3,0,o.xb(l,8).ngClassUntouched,o.xb(l,8).ngClassTouched,o.xb(l,8).ngClassPristine,o.xb(l,8).ngClassDirty,o.xb(l,8).ngClassValid,o.xb(l,8).ngClassInvalid,o.xb(l,8).ngClassPending)})}function I(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),o.fb(16777216,null,null,1,null,D)),o.nb(2,278528,null,0,d.h,[o.N,o.K,o.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.Eventos[l.parent.parent.parent.context.index][l.parent.context.index])},null)}function y(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,14,"ion-item",[],null,null,null,h.X,h.m)),o.nb(1,49152,null,0,u.G,[o.h,o.k],null,null),(n()(),o.ob(2,0,null,0,12,"ion-item-group",[["style","width: 100%"]],null,null,null,h.T,h.o)),o.nb(3,49152,null,0,u.I,[o.h,o.k],null,null),(n()(),o.ob(4,0,null,0,8,"ion-item-divider",[],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==n.component.ToggleC(n.parent.parent.context.index,n.context.index)&&o),o},h.S,h.n)),o.nb(5,49152,null,0,u.H,[o.h,o.k],null,null),(n()(),o.ob(6,0,null,0,2,"ion-label",[["text-uppercase",""]],null,null,null,h.Y,h.s)),o.nb(7,49152,null,0,u.M,[o.h,o.k],null,null),(n()(),o.Bb(8,0,["",""])),(n()(),o.fb(16777216,null,0,1,null,C)),o.nb(10,16384,null,0,d.i,[o.N,o.K],{ngIf:[0,"ngIf"]},null),(n()(),o.fb(16777216,null,0,1,null,x)),o.nb(12,16384,null,0,d.i,[o.N,o.K],{ngIf:[0,"ngIf"]},null),(n()(),o.fb(16777216,null,0,1,null,I)),o.nb(14,16384,null,0,d.i,[o.N,o.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,10,0,0==e.Tcomp[l.parent.parent.context.index][l.context.index]),n(l,12,0,1==e.Tcomp[l.parent.parent.context.index][l.context.index]),n(l,14,0,1==e.Tcomp[l.parent.parent.context.index][l.context.index])},function(n,l){n(l,8,0,l.context.$implicit.NameComponent)})}function w(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),o.fb(16777216,null,null,1,null,y)),o.nb(2,278528,null,0,d.h,[o.N,o.K,o.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.Componentes[l.parent.context.index])},null)}function k(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,12,"ion-item-group",[["style","width: 100%"]],null,null,null,h.T,h.o)),o.nb(1,49152,null,0,u.I,[o.h,o.k],null,null),(n()(),o.ob(2,0,null,0,8,"ion-item-divider",[],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==n.component.ToggleD(n.context.index)&&o),o},h.S,h.n)),o.nb(3,49152,null,0,u.H,[o.h,o.k],null,null),(n()(),o.ob(4,0,null,0,2,"ion-label",[["color","danger"],["text-uppercase",""]],null,null,null,h.Y,h.s)),o.nb(5,49152,null,0,u.M,[o.h,o.k],{color:[0,"color"]},null),(n()(),o.Bb(6,0,["",""])),(n()(),o.fb(16777216,null,0,1,null,g)),o.nb(8,16384,null,0,d.i,[o.N,o.K],{ngIf:[0,"ngIf"]},null),(n()(),o.fb(16777216,null,0,1,null,f)),o.nb(10,16384,null,0,d.i,[o.N,o.K],{ngIf:[0,"ngIf"]},null),(n()(),o.fb(16777216,null,0,1,null,w)),o.nb(12,16384,null,0,d.i,[o.N,o.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,"danger"),n(l,8,0,0==e.TDisp[l.context.index]),n(l,10,0,1==e.TDisp[l.context.index]),n(l,12,0,1==e.TDisp[l.context.index])},function(n,l){n(l,6,0,l.context.$implicit.NameDevices)})}function T(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,14,"ion-header",[],null,null,null,h.O,h.i)),o.nb(1,49152,null,0,u.A,[o.h,o.k],null,null),(n()(),o.ob(2,0,null,0,12,"ion-toolbar",[],null,null,null,h.lb,h.F)),o.nb(3,49152,null,0,u.Ab,[o.h,o.k],null,null),(n()(),o.ob(4,0,null,0,3,"ion-button",[["color","white"],["fill","clear"],["slot","start"]],null,null,null,h.J,h.d)),o.nb(5,49152,null,0,u.j,[o.h,o.k],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),o.ob(6,0,null,0,1,"ion-icon",[["name","arrow-round-back"],["slot","icon-only"]],null,null,null,h.P,h.j)),o.nb(7,49152,null,0,u.B,[o.h,o.k],{name:[0,"name"]},null),(n()(),o.ob(8,0,null,0,2,"ion-title",[["style","text-align: center"],["text-uppercase",""]],null,null,null,h.jb,h.D)),o.nb(9,49152,null,0,u.yb,[o.h,o.k],null,null),(n()(),o.Bb(10,0,["",""])),(n()(),o.ob(11,0,null,0,3,"ion-button",[["color","white"],["fill","clear"],["slot","end"]],null,null,null,h.J,h.d)),o.nb(12,49152,null,0,u.j,[o.h,o.k],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),o.ob(13,0,null,0,1,"ion-icon",[["name","arrow-round-back"],["slot","icon-only"]],null,null,null,h.P,h.j)),o.nb(14,49152,null,0,u.B,[o.h,o.k],{name:[0,"name"]},null),(n()(),o.ob(15,0,null,null,5,"ion-content",[["class","Contenido"]],null,null,null,h.K,h.e)),o.nb(16,49152,null,0,u.t,[o.h,o.k],null,null),(n()(),o.ob(17,0,null,0,3,"ion-list",[],null,null,null,h.Z,h.t)),o.nb(18,49152,null,0,u.N,[o.h,o.k],null,null),(n()(),o.fb(16777216,null,0,1,null,k)),o.nb(20,278528,null,0,d.h,[o.N,o.K,o.s],{ngForOf:[0,"ngForOf"]},null),(n()(),o.ob(21,0,null,null,4,"ion-footer",[],null,null,null,h.N,h.h)),o.nb(22,49152,null,0,u.y,[o.h,o.k],null,null),(n()(),o.ob(23,0,null,0,2,"ion-button",[["color","medium"],["expand","block"],["fill","outline"]],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==n.component.Asociar()&&o),o},h.J,h.d)),o.nb(24,49152,null,0,u.j,[o.h,o.k],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(n()(),o.Bb(-1,0,[" Asociar Eventos "]))],function(n,l){var e=l.component;n(l,5,0,"white","clear"),n(l,7,0,"arrow-round-back"),n(l,12,0,"white","clear"),n(l,14,0,"arrow-round-back"),n(l,20,0,e.Dispositivo),n(l,24,0,"medium","block","outline")},function(n,l){n(l,10,0,l.component.Data[1])})}function _(n){return o.Cb(0,[(n()(),o.ob(0,0,null,null,1,"app-perfil-events",[],null,null,null,T,m)),o.nb(1,114688,null,0,a,[t.a,i.a,u.Gb,r.a,s.a,v.a],null,null)],function(n,l){n(l,1,0)},null)}var E=o.kb("app-perfil-events",a,_,{},{},[]);e.d(l,"PerfilEventsPageModuleNgFactory",function(){return A});var A=o.lb(c,[],function(n){return o.ub([o.vb(512,o.j,o.ab,[[8,[p.a,E]],[3,o.j],o.x]),o.vb(4608,d.k,d.j,[o.u,[2,d.q]]),o.vb(4608,b.g,b.g,[]),o.vb(4608,u.b,u.b,[o.z,o.g]),o.vb(4608,u.Fb,u.Fb,[u.b,o.j,o.q,d.c]),o.vb(4608,u.Ib,u.Ib,[u.b,o.j,o.q,d.c]),o.vb(1073742336,d.b,d.b,[]),o.vb(1073742336,b.f,b.f,[]),o.vb(1073742336,b.a,b.a,[]),o.vb(1073742336,u.Cb,u.Cb,[]),o.vb(1073742336,v.n,v.n,[[2,v.t],[2,v.m]]),o.vb(1073742336,c,c,[]),o.vb(1024,v.k,function(){return[[{path:"",component:a}]]},[])])})}}]);