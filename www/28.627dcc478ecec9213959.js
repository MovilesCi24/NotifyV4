(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{YunN:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("dVwY"),i=e("fhD/"),u=e("ZZ/e"),r=e("ixqX"),a=e("YdJ5"),s=function(){function n(n,l,e,t,o,i){this.global=n,this.Post=l,this.navCtrl=e,this.Loading=t,this.Alert=o,this.Aroute=i,this.Datos=new Array,this.Devices=new Array,this.Dispositivo=new Array,this.Componentes=new Array,this.Eventos=new Array,this.TDisp=new Array,this.Tcomp=new Array,this.Vevent=new Array,this.Enviado=new Array,this.Editar=!0;var u=this.Aroute.snapshot.paramMap.get("Id");this.Data=u.split("."),console.log(this.Data),this.Id_Perfil=this.Data[0],console.log(this.Id_Perfil)}return n.prototype.ngOnInit=function(){var n=this;this.Post.Event({Option:"GetDevices"},function(l,e){console.log(e),null==l?(n.Devices=JSON.parse(e.data),n.OrganizarData(n.Devices)):n.Alert.AlertOnebutton("Error",JSON.stringify(l.message))}),this.Post.Event({Option:"EventProfile",Id_ProfileEvent:this.Id_Perfil},function(l,e){console.log(e),null==l?n.Datos=JSON.parse(e.data):n.Alert.AlertOnebutton("Error",JSON.stringify(l.message))})},n.prototype.OrganizarData=function(n){var l=this;this.Dispositivo=new Array;for(var e=new Map,t=0,o=n;t<o.length;t++)e.has((d=o[t]).Id_DeviceType)||(e.set(d.Id_DeviceType,!0),this.Dispositivo.push({Id_DeviceType:d.Id_DeviceType,NameDevices:d.NameDevices}),this.TDisp.push(!0));this.Componentes=new Array(this.Dispositivo.length),this.Tcomp=new Array(this.Dispositivo.length);for(var i=0;i<this.Dispositivo.length;i++){this.Componentes[i]=new Array,this.Tcomp[i]=new Array;for(var u=new Map,r=0,a=n;r<a.length;r++)u.has((d=a[r]).Id_Component)||d.Id_DeviceType!=this.Dispositivo[i].Id_DeviceType||(u.set(d.Id_Component,!0),this.Componentes[i].push({Id_Component:d.Id_Component,NameComponent:d.NameComponent}),this.Tcomp[i].push(!1))}for(this.Eventos=new Array(this.Dispositivo.length),this.Vevent=new Array(this.Dispositivo.length),i=0;i<this.Dispositivo.length;i++){this.Eventos[i]=new Array(this.Componentes[i].length),this.Vevent[i]=new Array(this.Componentes[i].length);for(var s=0;s<this.Componentes[i].length;s++){this.Eventos[i][s]=new Array,this.Vevent[i][s]=new Array;for(var c=new Map,p=0,b=n;p<b.length;p++){var d;c.has((d=b[p]).Id_EventComponent)||d.Id_DeviceType!=this.Dispositivo[i].Id_DeviceType||d.Id_Component!=this.Componentes[i][s].Id_Component||(c.set(d.Id_EventComponent,!0),this.Eventos[i][s].push({Id_DeviceType:d.Id_DeviceType,NameDevices:d.NameDevices,Id_Component:d.Id_Component,NameComponent:d.NameComponent,Id_EventComponent:d.Id_EventComponent,NameEvent:d.NameEvent,Id_DeviceComponent:d.Id_DeviceComponent}),this.Vevent[i][s].push(!1))}}}console.log(this.Eventos),setTimeout(function(){l.VerificarExis()},1e3)},n.prototype.VerificarExis=function(){for(var n=0;n<this.Datos.length;n++)for(var l=0;l<this.Dispositivo.length;l++)for(var e=0;e<this.Componentes[l].length;e++)for(var t=0;t<this.Eventos[l][e].length;t++)this.Datos[n].Id_EventComponent==this.Eventos[l][e][t].Id_EventComponent&&(this.Vevent[l][e][t]=!0)},n.prototype.Atras=function(){this.navCtrl.navigateRoot("user-perfil"==this.Data[2]?"/"+this.Data[2]+"/"+this.Data[3]+"."+this.Data[4]:"/"+this.Data[2])},n.prototype.EditarActive=function(){this.Editar=!1},n.prototype.ToggleD=function(n){0==this.TDisp[n]?this.TDisp[n]=!0:1==this.TDisp[n]&&(this.TDisp[n]=!1)},n.prototype.ToggleC=function(n,l){0==this.Tcomp[n][l]?this.Tcomp[n][l]=!0:1==this.Tcomp[n][l]&&(this.Tcomp[n][l]=!1)},n.prototype.Guardar=function(){var n=this;this.Post.Event({Option:"BlankProfile",Id_ProfileEvent:this.Id_Perfil},function(l,e){console.log(e),null==l?n.Asociar():n.Alert.AlertOnebutton("Error",JSON.stringify(l.message))})},n.prototype.Asociar=function(){var n=this;this.Loading.LoadingNormal("Asociando Eventos..."),console.log(this.Vevent);for(var l=0,e=0;e<this.Dispositivo.length;e++)for(var t=0;t<this.Componentes[e].length;t++)for(var o=0;o<this.Eventos[e][t].length;o++)1==this.Vevent[e][t][o]&&(l+=1,this.Enviado.push(!1));if(0==l)this.Loading.HideLoading(),this.Loading.LoadingNormal("Seleccione al menos un evento",2);else{var i=0;for(e=0;e<this.Dispositivo.length;e++)for(t=0;t<this.Componentes[e].length;t++)for(o=0;o<this.Eventos[e][t].length;o++)1==this.Vevent[e][t][o]&&(this.Post.Event({Option:"AsociateEvent",Id_ProfileEvent:this.Id_Perfil,Id_DeviceComponent:this.Eventos[e][t][o].Id_DeviceComponent,Id_DeviceType:this.Eventos[e][t][o].Id_DeviceType,Id_EventComponent:this.Eventos[e][t][o].Id_EventComponent},function(l,e){console.log(e),null==l?n.Enviado[i]=!0:n.Alert.AlertOnebutton("Error",JSON.stringify(l.message))}),i+=1);setTimeout(function(){n.Loading.HideLoading(),n.Editar=!0,n.ngOnInit()},2e3)}},n}(),c=function(){return function(){}}(),p=e("pMnS"),b=e("oBZk"),d=e("gIcY"),h=e("Ip0R"),f=e("ZYCi"),g=t.mb({encapsulation:0,styles:[[""]],data:{}});function v(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,3,"ion-button",[["color","white"],["fill","clear"],["slot","end"]],null,null,null,b.J,b.d)),t.nb(1,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),t.ob(2,0,null,0,1,"ion-icon",[["name","create"],["slot","icon-only"]],null,null,null,b.P,b.j)),t.nb(3,49152,null,0,u.B,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"white","clear"),n(l,3,0,"create")},null)}function m(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,3,"ion-button",[["color","blue"],["fill","clear"],["slot","end"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.EditarActive()&&t),t},b.J,b.d)),t.nb(1,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),t.ob(2,0,null,0,1,"ion-icon",[["name","create"],["slot","icon-only"]],null,null,null,b.P,b.j)),t.nb(3,49152,null,0,u.B,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"blue","clear"),n(l,3,0,"create")},null)}function x(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,2,"ion-button",[["color","medium"],["expand","block"],["fill","outline"]],null,null,null,b.J,b.d)),t.nb(1,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(n()(),t.Bb(-1,0,["Editando..."]))],function(n,l){n(l,1,0,"medium","block","outline")},null)}function C(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,1,"ion-icon",[["name","arrow-dropdown"],["slot","end"]],null,null,null,b.P,b.j)),t.nb(1,49152,null,0,u.B,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"arrow-dropdown")},null)}function I(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,1,"ion-icon",[["name","remove"],["slot","end"]],null,null,null,b.P,b.j)),t.nb(1,49152,null,0,u.B,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"remove")},null)}function D(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,1,"ion-icon",[["name","arrow-dropdown"],["slot","end"]],null,null,null,b.P,b.j)),t.nb(1,49152,null,0,u.B,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"arrow-dropdown")},null)}function y(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,1,"ion-icon",[["name","remove"],["slot","end"]],null,null,null,b.P,b.j)),t.nb(1,49152,null,0,u.B,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"remove")},null)}function E(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,6,"ion-toggle",[["color","danger"],["disabled","true"],["slot","end"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0,i=n.component;return"ionBlur"===l&&(o=!1!==t.xb(n,1)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t.xb(n,1)._handleIonChange(e.target.checked)&&o),"ngModelChange"===l&&(o=!1!==(i.Vevent[n.parent.parent.parent.parent.parent.context.index][n.parent.parent.parent.context.index][n.parent.context.index]=e)&&o),o},b.kb,b.E)),t.nb(1,16384,null,0,u.c,[t.k],null,null),t.yb(1024,null,d.b,function(n){return[n]},[u.c]),t.nb(3,671744,null,0,d.e,[[8,null],[8,null],[8,null],[6,d.b]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),t.yb(2048,null,d.c,null,[d.e]),t.nb(5,16384,null,0,d.d,[[4,d.c]],null,null),t.nb(6,49152,null,0,u.zb,[t.h,t.k],{color:[0,"color"],disabled:[1,"disabled"]},null)],function(n,l){n(l,3,0,"true",l.component.Vevent[l.parent.parent.parent.parent.parent.context.index][l.parent.parent.parent.context.index][l.parent.context.index]),n(l,6,0,"danger","true")},function(n,l){n(l,0,0,t.xb(l,5).ngClassUntouched,t.xb(l,5).ngClassTouched,t.xb(l,5).ngClassPristine,t.xb(l,5).ngClassDirty,t.xb(l,5).ngClassValid,t.xb(l,5).ngClassInvalid,t.xb(l,5).ngClassPending)})}function k(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,6,"ion-toggle",[["color","danger"],["disabled","false"],["slot","end"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0,i=n.component;return"ionBlur"===l&&(o=!1!==t.xb(n,1)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t.xb(n,1)._handleIonChange(e.target.checked)&&o),"ngModelChange"===l&&(o=!1!==(i.Vevent[n.parent.parent.parent.parent.parent.context.index][n.parent.parent.parent.context.index][n.parent.context.index]=e)&&o),o},b.kb,b.E)),t.nb(1,16384,null,0,u.c,[t.k],null,null),t.yb(1024,null,d.b,function(n){return[n]},[u.c]),t.nb(3,671744,null,0,d.e,[[8,null],[8,null],[8,null],[6,d.b]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),t.yb(2048,null,d.c,null,[d.e]),t.nb(5,16384,null,0,d.d,[[4,d.c]],null,null),t.nb(6,49152,null,0,u.zb,[t.h,t.k],{color:[0,"color"],disabled:[1,"disabled"]},null)],function(n,l){n(l,3,0,"false",l.component.Vevent[l.parent.parent.parent.parent.parent.context.index][l.parent.parent.parent.context.index][l.parent.context.index]),n(l,6,0,"danger","false")},function(n,l){n(l,0,0,t.xb(l,5).ngClassUntouched,t.xb(l,5).ngClassTouched,t.xb(l,5).ngClassPristine,t.xb(l,5).ngClassDirty,t.xb(l,5).ngClassValid,t.xb(l,5).ngClassInvalid,t.xb(l,5).ngClassPending)})}function w(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,6,"ion-item",[],null,null,null,b.X,b.m)),t.nb(1,49152,null,0,u.G,[t.h,t.k],null,null),(n()(),t.Bb(2,0,[" "," "])),(n()(),t.fb(16777216,null,0,1,null,E)),t.nb(4,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,0,1,null,k)),t.nb(6,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,4,0,1==e.Editar),n(l,6,0,0==e.Editar)},function(n,l){n(l,2,0,l.context.$implicit.NameEvent)})}function _(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,w)),t.nb(2,278528,null,0,h.h,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.Eventos[l.parent.parent.parent.context.index][l.parent.context.index])},null)}function T(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,14,"ion-item",[],null,null,null,b.X,b.m)),t.nb(1,49152,null,0,u.G,[t.h,t.k],null,null),(n()(),t.ob(2,0,null,0,12,"ion-item-group",[["style","width: 100%"]],null,null,null,b.T,b.o)),t.nb(3,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.ob(4,0,null,0,8,"ion-item-divider",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.ToggleC(n.parent.parent.context.index,n.context.index)&&t),t},b.S,b.n)),t.nb(5,49152,null,0,u.H,[t.h,t.k],null,null),(n()(),t.ob(6,0,null,0,2,"ion-label",[["text-uppercase",""]],null,null,null,b.Y,b.s)),t.nb(7,49152,null,0,u.M,[t.h,t.k],null,null),(n()(),t.Bb(8,0,["",""])),(n()(),t.fb(16777216,null,0,1,null,D)),t.nb(10,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,0,1,null,y)),t.nb(12,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,0,1,null,_)),t.nb(14,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,10,0,0==e.Tcomp[l.parent.parent.context.index][l.context.index]),n(l,12,0,1==e.Tcomp[l.parent.parent.context.index][l.context.index]),n(l,14,0,1==e.Tcomp[l.parent.parent.context.index][l.context.index])},function(n,l){n(l,8,0,l.context.$implicit.NameComponent)})}function A(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t.fb(16777216,null,null,1,null,T)),t.nb(2,278528,null,0,h.h,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.Componentes[l.parent.context.index])},null)}function N(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,12,"ion-item-group",[["style","width: 100%"]],null,null,null,b.T,b.o)),t.nb(1,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.ob(2,0,null,0,8,"ion-item-divider",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.ToggleD(n.context.index)&&t),t},b.S,b.n)),t.nb(3,49152,null,0,u.H,[t.h,t.k],null,null),(n()(),t.ob(4,0,null,0,2,"ion-label",[["color","danger"],["text-uppercase",""]],null,null,null,b.Y,b.s)),t.nb(5,49152,null,0,u.M,[t.h,t.k],{color:[0,"color"]},null),(n()(),t.Bb(6,0,["",""])),(n()(),t.fb(16777216,null,0,1,null,C)),t.nb(8,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,0,1,null,I)),t.nb(10,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,0,1,null,A)),t.nb(12,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,"danger"),n(l,8,0,0==e.TDisp[l.context.index]),n(l,10,0,1==e.TDisp[l.context.index]),n(l,12,0,1==e.TDisp[l.context.index])},function(n,l){n(l,6,0,l.context.$implicit.NameDevices)})}function P(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,2,"ion-button",[["color","medium"],["expand","block"],["fill","outline"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.Guardar()&&t),t},b.J,b.d)),t.nb(1,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(n()(),t.Bb(-1,0,[" Guardar Cambios\n"]))],function(n,l){n(l,1,0,"medium","block","outline")},null)}function O(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,16,"ion-header",[],null,null,null,b.O,b.i)),t.nb(1,49152,null,0,u.A,[t.h,t.k],null,null),(n()(),t.ob(2,0,null,0,12,"ion-toolbar",[],null,null,null,b.lb,b.F)),t.nb(3,49152,null,0,u.Ab,[t.h,t.k],null,null),(n()(),t.ob(4,0,null,0,3,"ion-button",[["color","danger"],["fill","clear"],["slot","start"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.Atras()&&t),t},b.J,b.d)),t.nb(5,49152,null,0,u.j,[t.h,t.k],{color:[0,"color"],fill:[1,"fill"]},null),(n()(),t.ob(6,0,null,0,1,"ion-icon",[["name","arrow-round-back"],["slot","icon-only"]],null,null,null,b.P,b.j)),t.nb(7,49152,null,0,u.B,[t.h,t.k],{name:[0,"name"]},null),(n()(),t.ob(8,0,null,0,2,"ion-title",[["style","text-align: center"],["text-uppercase",""]],null,null,null,b.jb,b.D)),t.nb(9,49152,null,0,u.yb,[t.h,t.k],null,null),(n()(),t.Bb(10,0,["",""])),(n()(),t.fb(16777216,null,0,1,null,v)),t.nb(12,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,0,1,null,m)),t.nb(14,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.fb(16777216,null,0,1,null,x)),t.nb(16,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(17,0,null,null,5,"ion-content",[],null,null,null,b.K,b.e)),t.nb(18,49152,null,0,u.t,[t.h,t.k],null,null),(n()(),t.ob(19,0,null,0,3,"ion-list",[],null,null,null,b.Z,b.t)),t.nb(20,49152,null,0,u.N,[t.h,t.k],null,null),(n()(),t.fb(16777216,null,0,1,null,N)),t.nb(22,278528,null,0,h.h,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.ob(23,0,null,null,3,"ion-footer",[],null,null,null,b.N,b.h)),t.nb(24,49152,null,0,u.y,[t.h,t.k],null,null),(n()(),t.fb(16777216,null,0,1,null,P)),t.nb(26,16384,null,0,h.i,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,"danger","clear"),n(l,7,0,"arrow-round-back"),n(l,12,0,0==e.Editar),n(l,14,0,1==e.Editar),n(l,16,0,0==e.Editar),n(l,22,0,e.Dispositivo),n(l,26,0,0==e.Editar)},function(n,l){n(l,10,0,l.component.Data[1])})}function B(n){return t.Cb(0,[(n()(),t.ob(0,0,null,null,1,"app-vperfil-event",[],null,null,null,O,g)),t.nb(1,114688,null,0,s,[o.a,i.a,u.Gb,r.a,a.a,f.a],null,null)],function(n,l){n(l,1,0)},null)}var V=t.kb("app-vperfil-event",s,B,{},{},[]);e.d(l,"VperfilEventPageModuleNgFactory",function(){return j});var j=t.lb(c,[],function(n){return t.ub([t.vb(512,t.j,t.ab,[[8,[p.a,V]],[3,t.j],t.x]),t.vb(4608,h.k,h.j,[t.u,[2,h.q]]),t.vb(4608,d.g,d.g,[]),t.vb(4608,u.b,u.b,[t.z,t.g]),t.vb(4608,u.Fb,u.Fb,[u.b,t.j,t.q,h.c]),t.vb(4608,u.Ib,u.Ib,[u.b,t.j,t.q,h.c]),t.vb(1073742336,h.b,h.b,[]),t.vb(1073742336,d.f,d.f,[]),t.vb(1073742336,d.a,d.a,[]),t.vb(1073742336,u.Cb,u.Cb,[]),t.vb(1073742336,f.n,f.n,[[2,f.t],[2,f.m]]),t.vb(1073742336,c,c,[]),t.vb(1024,f.k,function(){return[[{path:"",component:s}]]},[])])})}}]);